---
类型: " 笔记"
时间: 2024-01-22T11:08:00 
父类标识: C++ prime plus笔记
---
# 数组
## 数组初始化规则
数组可以用{}列表初始化，但是只有在定义数组时可以列表初始化，以后就不能用了，也不能用一个数组赋给另一个数组。
初始化数组时，提供的值可以少于数组元素的数目，如果只对数组的一部分初始化，则编译器将其他元素设置为0。
如果数组初始化时，方括号（【】）内为空，则cpp编译器将计算元素个数，例如对于`short things[]={1,3,4,5}`编译器将使其包含4个元素。
数组列表初始化时可以省略=号，其次可以不在{}内包含任意元素，将把所有元素设置为0
列表初始化进制缩窄转换。
# 字符串
## c风格字符串
c风格字符串以**空字符**（null character）结尾
```c++
char dog[8]={'b','e','a','u','x',' ','I','I'};//not a string!
char cat[8]={'f','a','t','e','s','s','a','\0'};//a string!
```
可以使用**字符串常量**（string constant）或**字符串字面值**（string literal）来进行初始化，在确定了存储所需要的最小字符，别忘了将结尾的空字符算进去。
## 字符和字符串的区别
以s为例，'s'可以赋值给字符，而"s"代表两个字符's','\0'，更糟糕的是"s"实际上代表的是字符串所在的地址。
```c++
char c="s"//illegal type mismatch
```
由于地址是cpp中一种特殊的类型，因此cpp编译器允许这种不合理的做法。
## 拼接字符串常量
cpp允许拼接字符串字面值，即将两个用引号括起的字符串合并为一个。事实上，任何由两个空白（空格、制表符和换行符）分隔的字符串常量都将自动拼接成一个。
　```c++
#include<iostream>

using namespace std;

int main(){

    cout<<"I don't give my right arm to be ""a great violinist\n";

    cout<<"I don't give my right arm to be a"

    " great violinist\n";

    return 0;

}
```
## 字符串下标
```c++
#include<iostream>

#include<cstring>

using namespace std;

int main(){

    const int size=15;

    char name1[size];

    char name2[size]="C++owboy";

  

    cout<<"Howdy! I'm "<<name2;

    cout<<"! What's your name?\n";

    cin>>name1;

    cout<<"Well, "<<name1<<" ,your name has ";

    cout<<strlen(name1)<<" letters and is stored\n";

    //strlen返回的存储在数组的字符串的长度，而不是数组长度

    //另外，strlen只计算肉眼可见的字符，不把空字符算在内。

    cout<<"in an array of "<<sizeof(name1)<<" bytes.\n";

    cout<<"Your initial is "<<name1[0]<<".\n";

    name2[3]='\0';

    cout<<"Here are the first 3 characters of my name: ";

    cout<<name2<<endl;

    return 0;

}
```
## 字符串输入
```c++
#include<iostream>

using namespace std;

int main(){

    const int Arsize=20;

    char name[Arsize];

    char dessert[Arsize];

  

    cout<<"Enter your name:\n";

    cin>>name;

    cout<<"Enter your favorite dessert:\n";

    cin>>dessert;

    cout<<"I have some delicious "<<dessert;

    cout<<" for you, "<<name<<".\n";

    return 0;

}
```
cin使用空白（空格、制表符和换行符）来确定字符串结束的位置
## 读取一行字符串
 getline()读取整行，并且通过回车键的输入确定输入结尾，并丢弃换行符
 ```c++
 #include<iostream>

using namespace std;

int main(){

    const int Arsize=20;

    char name[Arsize];

    char dessert[Arsize];

  

    cout<<"Enter your name:\n";

    cin.getline(name,Arsize);

    cout<<"Enter your favorite dessert:\n";

    cin.getline(dessert,Arsize);

    cout<<"I have some delicious "<<dessert;

    cout<<" for you, "<<name<<".\n";

    return 0;

}
```
 get()函数工作方式与getline()类似，但是不丢弃换行符，也就说，如果要如果两次聊调用get()第二次调用后会直接返回，因为检测到换行符还留在输入队列中。
 但是不使用任何参数的get()，可以读取下一个字符。
 ```c++
 #include<iostream>

using namespace std;

int main(){

    const int Arsize=20;

    char name[Arsize];

    char dessert[Arsize];

  

    cout<<"Enter your name:\n";

    cin.get(name,Arsize).get();

    cout<<"Enter your favorite dessert:\n";

    cin.get(dessert,Arsize).get();

    cout<<"I have some delicious "<<dessert;

    cout<<" for you, "<<name<<".\n";

    return 0;

}
```
# String类
## 初始化
允许列表初始化，也能赋值初始化
```c++
#include<iostream>

using std::string;

int main(){

    char first_date[]={"Le Chapon Dodu"};

    char second_date[] {"The Elegant plate"};

    string third_date= {"The Bread Bowl"};

    string fourth_date {"Hank's Fine Eats"};

    string fifth_date="panther";

  

}
```
## String类的赋值、拼接和附加
使用string类时，某些操作更加简单，比如不能将一个数组赋给另一个数组，但可以将一个string对象赋给另一个string对象
```c++
char char1[20];
char char2[20]="jaguar";
string str1;
string str2="pather";
char1=char2;            //invalid, no array assignment
str1=str2;              //valid, object assignment ok

string str3;
str3=str1+str2;
str1+=str2;
```
## string类的其他操作
```c++
//C Type:
strcpy(charr3,charr1);//copy charr1 to charr3
strcat(charr3,charr1);//add charr1 to end of charr3
//C++Type:
str3=str1;
str3+=str1;

str1.size();
strlen(charr1);
```
## string类IO
可以使用cin和>>来将输入存储到string对象中，使用cout和<<来显示string对象。但是getline的语法不同。
```c++
#include<iostream>

#include<string>

#include<cstring>

int main(){

    using namespace std;

    char charr[20];

    string str;

    cout<<"Length of string in charr before input: "<<strlen(charr)<<endl;

    cout<<"Length of string in str before input: "<<str.size()<<endl;

    cout<<"Enter a line of text:\n";

    cin.getline(charr,20);

    cout<<"You entered: "<<charr<<endl;

    cout<<"Enter another line of text:\n";

    getline(cin,str);

    cout<<"You entered: "<<str<<endl;

    cout<<"Length of string in charr after input: "<<strlen(charr)<<endl;

    cout<<"Length of string in str after input: "<<str.size()<<endl;

    return 0;

}

```
`cin.getline(charr,20)`表示getline()是istream的一个类方法，而`getline(cin,str)`表示这个getline()不是类方法

## 其他形式的字符串字面值
cpp除了char外还有wchar_t, char16_t和char32_t，对于这些类型的字符串字面值，使用前缀L、u、U表示
```c++
wchar_t title[]=L"Chief Astrongator";
char16_t name[]=u"Felonia Ripova";
char32_t car[]=U"Humber Super Snipe";
```
原始（raw）字符串，字符表示的就是它自己，没有转义字符，使用R标识原始字符串，并将 "( 和 )" 作为定界符
```c++
//
cout<<R"(Jim "King" Tutt uses "\n" instead of endl.)"<<"\n";//Jim "King" Tutt uses "\n" instead of endl.
```
原始字符串允许你自定义定界符，在"和(之间可以添加别的字符，如："\*(这意味着必须使用 )\*"标识字符串的结尾。
可以将前缀R与其他字符串前缀结合使用，以标识wchar_t等类型的原始字符串，可以放在前面也可以放在后面，如Ru、UR等
# 结构
## 结构声明的位置
![[f2e29ee5d2323c268b7506092b9f924.jpg]]
## 结构初始化
```c++
inflatable guest={
	"Glorious Gloria",
	1.88,
	29.99
};
inflatable duck={"Daphne",0.12,9.98};
inflatable duck{"Daphne",0.12,9.98};//可以列表初始化
```
## 结构的特性
```c++
// assgn_st.cpp -- assigning structures

#include <iostream>

struct inflatable

{

    char name[20];

    float volume;

    double price;

};

int main()

{

    using namespace std;

    inflatable bouquet =

    {

        "sunflowers",

        0.20,

        12.49

    };

    inflatable choice;

    cout << "bouquet: " << bouquet.name << " for $";

    cout << bouquet.price << endl;

  

    choice = bouquet;  // assign one structure to another

    cout << "choice: " << choice.name << " for $";

    cout << choice.price << endl;

    // cin.get();

    return 0;

}
```
结构允许使用=赋值给另一个同类型的结构，这样结构中的每个成员都被设置为另一个结构中的相应的成员的值。
可以同时完成定义结构和创建结构变量的工作。为此，只需要把变量名放在结束括号之后既可。
```c++
struct perks{
	int key_numbers;
	char car[12];
}mr_smith,ms_jones;
```
甚至可以同时初始化
```c++
struct perks{
	int key_numbers;
	char car[12];
}my_glitz={
	7,
	"Packard"
};
```
还可以声明没有名称的结构类型，但是后续无法创建这种类型的变量。
## 结构数组
```c++
inflatable guests[2]={
	{"Bambi",0.5,21.99},
	{"Godzilla",200,565.99}
};
```
## 结构中的位字段
和c相同cpp也允许指定占用特定位数的结构。字段类型应为整型和枚举，接下来是冒号，冒号后面是一个数字，它制定了使用的位数。可以使用没有名称的字段来提供间距。每个成员都被称为位字段（bit field）
```c++
struct torgle_register{
	unsigned int SN : 4;//4 bits for SN value
	unsigned int : 4;   //4 bits unused
	bool goodIn : 1;    //valid input(1 bit)
	bool goodTorgle : 1;//successful torgling
};